name: Laboratory Work 2 - Run

on:
  workflow_dispatch:
    inputs:
      task_number:
        description: '–ù–æ–º–µ—Ä –∑–∞–¥–∞–Ω–∏—è (1-6) –∏–ª–∏ 0 –¥–ª—è –≤—ã—Ö–æ–¥–∞'
        required: true
        default: '1'
        type: choice
        options:
          - '1'
          - '2'
          - '3'
          - '4'
          - '5'
          - '6'
      author:
        description: '–ê–≤—Ç–æ—Ä –∫–Ω–∏–≥–∏ (–¥–ª—è –∑–∞–¥–∞–Ω–∏—è 3)'
        required: false
        default: '–ü—É—à–∫–∏–Ω'
      title:
        description: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ (–¥–ª—è –∑–∞–¥–∞–Ω–∏—è 3)'
        required: false
        default: '–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω'
      year:
        description: '–ì–æ–¥ –∏–∑–¥–∞–Ω–∏—è (–¥–ª—è –∑–∞–¥–∞–Ω–∏—è 3)'
        required: false
        default: '1833'
      pages:
        description: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü (–¥–ª—è –∑–∞–¥–∞–Ω–∏—è 3)'
        required: false
        default: '480'

jobs:
  run-lab2:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout –∫–æ–¥
        uses: actions/checkout@v4

      - name: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Java
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'

      - name: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
        run: |
          cd lab
          javac LaboratoryWork2.java
          echo "‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"

      - name: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        id: prepare_input
        run: |
          TASK=${{ github.event.inputs.task_number }}

          # –§–æ—Ä–º–∏—Ä—É–µ–º –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–¥–∞–Ω–∏—è
          case $TASK in
            1|2|4|5)
              # –ó–∞–¥–∞–Ω–∏—è –±–µ–∑ –≤–≤–æ–¥–∞
              echo "$TASK" > input.txt
              echo "0" >> input.txt
              ;;
            3)
              # –ó–∞–¥–∞–Ω–∏–µ 3: –ö–ª–∞—Å—Å –ö–Ω–∏–≥–∞ (—Å –≤–≤–æ–¥–æ–º –¥–∞–Ω–Ω—ã—Ö)
              echo "$TASK" > input.txt
              echo "${{ github.event.inputs.author }}" >> input.txt
              echo "${{ github.event.inputs.title }}" >> input.txt
              echo "${{ github.event.inputs.year }}" >> input.txt
              echo "${{ github.event.inputs.pages }}" >> input.txt
              echo "0" >> input.txt
              ;;
            6)
              # –ó–∞–¥–∞–Ω–∏–µ 6: –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏
              echo "$TASK" > input.txt
              echo "0" >> input.txt
              ;;
          esac

      - name: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
        run: |
          cd lab
          echo "üöÄ –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞–Ω–∏—è ${{ github.event.inputs.task_number }}..."
          echo "================================================"
          java LaboratoryWork2 < ../input.txt || true
          echo "================================================"
          echo "‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ"

      - name: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–¥–∞–Ω–∏–∏
        run: |
          TASK=${{ github.event.inputs.task_number }}
          echo "üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–¥–∞–Ω–∏–∏ $TASK:"
          case $TASK in
            1) echo "–ö–ª–∞—Å—Å '–ö—Ä—É–≥' - —Ä–∞–±–æ—Ç–∞ —Å –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏";;
            2) echo "–ö–ª–∞—Å—Å '–°–∫–ª–∞–¥' - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ";;
            3) echo "–ö–ª–∞—Å—Å '–ö–Ω–∏–≥–∞' - —Ä–∞–±–æ—Ç–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–Ω–∏–≥–∞—Ö";;
            4) echo "–ö–ª–∞—Å—Å '–î—Ä–æ–±—å' - –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥—Ä–æ–±—è–º–∏";;
            5) echo "–†–∞–±–æ—Ç–∞ —Å –∫–ª–∞—Å—Å–æ–º Double - –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞-–æ–±–µ—Ä—Ç–∫–∏";;
            6) echo "–ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è String API";;
          esac

          if [ "$TASK" = "3" ]; then
            echo ""
            echo "üìö –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:"
            echo "  –ê–≤—Ç–æ—Ä: ${{ github.event.inputs.author }}"
            echo "  –ù–∞–∑–≤–∞–Ω–∏–µ: ${{ github.event.inputs.title }}"
            echo "  –ì–æ–¥: ${{ github.event.inputs.year }}"
            echo "  –°—Ç—Ä–∞–Ω–∏—Ü: ${{ github.event.inputs.pages }}"
          fi
