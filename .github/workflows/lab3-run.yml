name: Laboratory Work 3 - Run

on:
  workflow_dispatch:
    inputs:
      task_number:
        description: '–ù–æ–º–µ—Ä –∑–∞–¥–∞–Ω–∏—è (1-5) –∏–ª–∏ 0 –¥–ª—è –≤—ã—Ö–æ–¥–∞'
        required: true
        default: '1'
        type: choice
        options:
          - '1'
          - '2'
          - '3'
          - '4'
          - '5'
      login:
        description: '–õ–æ–≥–∏–Ω (–¥–ª—è –∑–∞–¥–∞–Ω–∏—è 5)'
        required: false
        default: 'user_123'
      password:
        description: '–ü–∞—Ä–æ–ª—å (–¥–ª—è –∑–∞–¥–∞–Ω–∏—è 5)'
        required: false
        default: 'password_123'
      confirm_password:
        description: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (–¥–ª—è –∑–∞–¥–∞–Ω–∏—è 5)'
        required: false
        default: 'password_123'

jobs:
  run-lab3:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout –∫–æ–¥
        uses: actions/checkout@v4

      - name: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Java
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'

      - name: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
        run: |
          cd lab
          javac LaboratoryWork3.java
          echo "‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"

      - name: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        id: prepare_input
        run: |
          TASK=${{ github.event.inputs.task_number }}

          # –§–æ—Ä–º–∏—Ä—É–µ–º –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–¥–∞–Ω–∏—è
          case $TASK in
            1|2|3|4)
              # –ó–∞–¥–∞–Ω–∏—è –±–µ–∑ –≤–≤–æ–¥–∞
              echo "$TASK" > input.txt
              echo "0" >> input.txt
              ;;
            5)
              # –ó–∞–¥–∞–Ω–∏–µ 5: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
              echo "$TASK" > input.txt
              echo "${{ github.event.inputs.login }}" >> input.txt
              echo "${{ github.event.inputs.password }}" >> input.txt
              echo "${{ github.event.inputs.confirm_password }}" >> input.txt
              echo "0" >> input.txt
              ;;
          esac

      - name: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
        run: |
          cd lab
          echo "üöÄ –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞–Ω–∏—è ${{ github.event.inputs.task_number }}..."
          echo "================================================"
          java LaboratoryWork3 < ../input.txt || true
          echo "================================================"
          echo "‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ"

      - name: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–¥–∞–Ω–∏–∏
        run: |
          TASK=${{ github.event.inputs.task_number }}
          echo "üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–¥–∞–Ω–∏–∏ $TASK:"
          case $TASK in
            1)
              echo "–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ - Student –∏ Magistracy"
              echo "–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞ –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤"
              ;;
            2)
              echo "–ö–æ–º–ø–æ–∑–∏—Ü–∏—è - Car, Lorry, SportCar"
              echo "–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è"
              ;;
            3)
              echo "–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã - –§—Ä—É–∫—Ç—ã"
              echo "–†–∞–±–æ—Ç–∞ —Å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏ –∏ –ø–æ–¥—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏"
              ;;
            4)
              echo "–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã - Printable"
              echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ instanceof"
              ;;
            5)
              echo "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è"
              echo "–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏—Å–∫–ª—é—á–µ–Ω–∏–π"
              echo ""
              echo "üîê –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏:"
              echo "  –õ–æ–≥–∏–Ω: ${{ github.event.inputs.login }}"
              echo "  –ü–∞—Ä–æ–ª—å: ${{ github.event.inputs.password }}"
              echo "  –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: ${{ github.event.inputs.confirm_password }}"
              ;;
          esac

      - name: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
        run: |
          if [ -f "lab/LAB3.md" ]; then
            echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–π–¥–µ–Ω–∞"
            echo "üìÑ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ LAB3.md:"
            head -n 20 lab/LAB3.md
          else
            echo "‚ö†Ô∏è  –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
          fi
